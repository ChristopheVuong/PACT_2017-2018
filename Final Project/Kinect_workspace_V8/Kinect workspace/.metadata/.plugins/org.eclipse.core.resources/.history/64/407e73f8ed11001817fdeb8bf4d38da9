package current;

import javax.swing.JFrame;

import com.jogamp.opengl.GLAutoDrawable;
import com.jogamp.opengl.glu.GLU;

import utils.kinect.ShowSkeletonAbstract;
import utils.listeners.EventListenerAbstract;

/**
 * Initialise l'affichage du squelette et le maintient à jour à l'aide des nouvelles données de positions.
 */
public final class ShowSkeleton extends ShowSkeletonAbstract {

	/**
	 * Lance une toile OpenGL.
	 * <p>
	 * Ajoute les listeners pour dessiner sur la toile, et pour pouvoir faire pivoter le squelette.
	 */
	public ShowSkeleton(final KinectInterface kinectInterface) {
		super(kinectInterface);

		getGLCanvas().addGLEventListener(new EventListener(getGLU()));

		final JFrame frame = new JFrame("Show Skeleton");
		frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		frame.getContentPane().add(getGLCanvas());
		frame.setSize(frame.getContentPane().getPreferredSize());
		frame.setVisible(true);
	}

	private class EventListener extends EventListenerAbstract {

		public EventListener(final GLU glu) {
			super(glu);
		}

		/**
		 * Permet d'afficher le contenu de la toile, qui grâce à l'Animator varie dynamiquement avec les variations du tableau positions.
		 * <p>
		 * Effectue les éventuels changements de vue du squelette.
		 * <p>
		 * Trace tous les segments liants les points du squelette.
		 */
		@Override
		public void display() {
			displayConstruct(drawable, ShowSkeleton.this);
		}
	}
}